from pii_manager import PiiEnum
from pii_manager.api import PiiManager
from pii_manager.lang import COUNTRY_ANY
import sys

# Define language, country(ies) and PII tasks
lang = sys.argv[1]
country = COUNTRY_ANY
tasklist = (PiiEnum.IP_ADDRESS, PiiEnum.EMAIL_ADDRESS, PiiEnum.PHONE_NUMBER)
#tasklist = PiiEnum.PHONE_NUMBER

# Instantiate object
proc = PiiManager(lang, country, tasks=tasklist)#, mode="convert")
#proc = PiiManager(lang, country, all_tasks=True, debug=True)
print(proc.task_info())

print("")

# Process a text buffer

test_set = {"en": ["212-456-7890	Domestic",
                    "+1-212-456-7890	International Phone Number",
                    "1-212-456-7890	Dialed in the US",
                    "+12312322334",
                    "2312322334",
                    "(231) 232-2334"],
            "fr": ["02 37 24 53 27",
                  "+332.99.36.37.45",
                  "(+33) 09.72.52.27.00",
                  "+339 72 54 34 00"],
            "nl": ["+31 6 22 52 97 45",
                    "+31(0)43-387 6650",
                    "+31 (0) 85 130 78 66",
                    "+31 (0)182 612 345",
                    "+31 (0)20 624 6811",
                    "+31 (0)73 6 232 000",
                    "+31 (0)6 42 32 7770",
                    "+31 (0)10 - 479 15 11",
                    "+31 (0)40 - 304 1519",
                    " +31 (0)73-6131763",
                    "+31 (0)76 8866 997",
                    " +31 (0)40 8416789",
                    "+31 20 510 8911",
                    " (020) 44 43636",
                    "(518) 842-1900",
                    "+31 20 573 2911"],
            "it": ["0522 951085",   # these are false negatives from hplt
                    "06/6840401",
                    "030.7267287",
                    "+39.0544.445071",
                    "0773/620905",
                    "0547 80252",
                    "0283420623",
                    "+39 041 529 8711",  # these are tourist atrraction and hospitals
                    "+39 06 6988 4676",
                    "+39 060608",
                    "+39-06-060-608.",
                    "+39-0668601500",
                    "(39) 06 4220 0001",
                    "+39 06 68371",
                    "06 2255290"],
            "es" : ["+34 626887977",
                   "(+34) 616159277",
                   "(+34) 94 405 47 58",
                   "+34 91 033 93 29",
                   "+34 914 29 83 63",
                    "+34 934 12 08 10",
                    "934 120 810"],
            "pt": ["(21) 3883-1000",
                    "34 4932-3849 (landlines) ",
                    "34 93402-5920 (mobile lines) ",
                    "+55 11 3149-5959 ",
                    "+55 61 3325-6410 ",
                    "+55 61 4020-0057 ",
                    "+55 21 3883-1000",
                    "+351 22(1) 394 349  (present day, outside Portugal)",
                    "21(1) 493 394  (present day, within Portugal, including Lisbon)",
                    "+351 912 394 349  (present day outside Portugal, T=1,3,6,2,0)",
                    "+351 21 359 4000",
                    "+351 22 003 9000",
                    "00351 223393472",
                  ],
            "de": ["+49 (0)30 4851923",
                    "+49 (0)421 - 33 04 105",
                    "+49 (0)8502 90060",
                     "+49 (0) 8362 7920",
                    "04188 - 5850-435",
                    "04141 - 606230",
                    "0221-569730",
                    "05523 - 56 347"],
            "sv": ["+46 40 685 79 37 ",
                    "08-5202 3500 ",
                    "+46 18 727 24 82 ",
                    "+46 (0)8-51954880 ",
                    "08-519 548 80 ",
                    "08-524 800 00 ",
                    "08-524 865 95"],
            "cs": ["Within Czech Republic:  534 324 234",
                    "Outside Czech Republic: +420 594 954 329",
                    "Within Czech Republic:  602 592 001",
                    "Outside Czech Republic: +420 602 582 121",
                    "+420 973 208 333",
                    "532 233 569",
                    "537 026 210"],
            "et" : ["(+372) 5084 772 ",
                    "(+372) 44 57 473",
                    "5084 7724"],
            "hu": ["(+36 1) 4 242 242",
                    "+36 (20) 611 8463",
                    "+36 - 30/9285 323",
                    "+36 20/249-0391",
                    "06/70-428-83-95",
                    "+36-1-784-25-57",
                    "+36/20-535-2030",
                    "+36 (20) 238 99 56",
                    "+36-30/904-3229",
                    "+36 (52) 417-847",
                    "+36 1 464 8600",
                    "+36 1 395 5565",
                    "+36-20-439-7331"],
            "lt": ["+371 22482067"
                    "+371 67 366 323"
                    "67392229, 67391780"
                    "+371 6703 7900"
                    "67037900 (edited)"],
            "fi":["08 493 1293",
                  "044 2819093",
                  "050 433 8291"
                  "+358442943920"],
            "da": [ "(+45) 32 88 99 00",
                    "+45 65 51 46 01",
                    "38 63 38 63"],
            "sl": ["01 473 34 34 (within Slovenia)",
                    "+386 1 342 43 43 (outside Slovenia)",
                    "+386 1 522 60 04",
                    "(01) 522 17 00",
                     "+386 71 366 381 "],
            "sk": ["+421 2/625 285 01",
                    "+421 2/591 008 12",
                    "+421 2/326 111 13",
                    "34/59 50 59 50",
                    "0903 295 714",
                    "+421 1 372 123 11"],
            "sr": ["+381 11 493 32 34",
                    "011 493 32 34",
                    "+381 11 6557100",
                    "+381 69 614041",
                    "0800 07 77 75",
                    "+381 114828492"],
            "bs": ["0 33 123 456 (within Sarajevo)[1]",
                    "0 33 123 456 (within Bosnia and Herzegovina)",
                    "+387 33 123 456 (outside of Bosnia and Herzegovina)",
                    "+387 33 285-100",
                    "+ 387 33 561-500",
                    "+387 61 834 500",
                    "058 620 950"],
            "mt": ["2123 2123 (after 2002, from within Malta)",
                    "+356 2123 2123 (after 2002, outside Malta)",
                   "(+356) 21380 270",
                   "(+356) 79262249",
                    "+356 2545 0000",
                    "+356 2134 4766",
                    "356 2291 5506",
                    "(+356) 21222644",
                   "(+356) 27 514 049"],
            "el": ["210 67 27 591",
                  "22940 94 794\n\u039a\u03b9\u03bd.: 6957 83 52 53",
                  "210-322-3111",
                  "+30 210 353 0390",
                  "+30 210 3536919",
                  "(+30) 210 3536919"],
            "bg": ["+359 (0) 73 885700",
                    "+359 (0) 878 647052",
                    " +359 (0) 2 958 95 19",
                    "+359 2 970 54 00",
                    "+359 2 40 14 100",
                    "+359 2/ 816 5000",
                    "(+359 2) 989 21 94",
                    "(+359 2) 963 1709",
                    "(+359 2) 9805610",
                    "(+359) 29300632",
                    "(+359) 879930034",
                    "(+359) 897 880 023",
                    "(+359 2) 989 21 94",
                    "+3592 932 09 33",
                    "02 347 2344 from a landline in Sofia",
                    "02 347 2344 from outside Sofia but in Bulgaria",
                    "+359 2 234 3442 from outside Bulgaria",
                    "+359 2 403 4000",
                    " +359 700 13 233",
                    "02/ 403 4112",
                    "+359 (0)2/1 9230",
                    "+35970013127"],
            "zh": ["+ 86-24-31523801",  # these are the maltese => but this rule will be applied to maltese
                    "+ 86-579-87967719",
                    "+ 86-371-55038932",
                    "+ 86-917-3633666",
                   "+86 1065132266"    # this is actual chinese
                  ],
            }

for t in test_set[lang]:
    text_out = proc(t)
    print(text_out)